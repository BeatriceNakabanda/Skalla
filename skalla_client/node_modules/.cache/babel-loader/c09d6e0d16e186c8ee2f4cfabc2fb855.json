{"remainingRequest":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/thread-loader/dist/cjs.js!/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/babel-loader/lib/index.js!/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/src/views/Tables/PendingEstimateTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/src/views/Tables/PendingEstimateTable.vue","mtime":1580895800836},{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import AddTaskForm from '../Forms/AddTaskForm'\nimport AuthService from \"../../services/AuthService\";\nimport axios from \"axios\";\nimport { format } from 'date-fns';\nexport default {\n  name: 'pending-table',\n  components: {// AddTaskForm,\n  },\n  props: {\n    type: {\n      type: String\n    },\n    title: String\n  },\n  data: function data() {\n    return {\n      modal: false,\n      isShowing: false,\n      isShow: false,\n      submitting: false,\n      error: false,\n      success: false,\n      format: format,\n      estimateData: {\n        task: '',\n        research: 0,\n        planning: 0,\n        development: 0,\n        testing: 0,\n        stabilization: 0,\n        certainty: 0,\n        sum: 0,\n        adjustedSum: 0,\n        comments: '',\n        totalSum: 0\n      },\n      estimationData: [],\n      estimate: {\n        dateCreated: \"\",\n        projectManager: \"\",\n        dueDate: \"\",\n        project: \"\",\n        taskDescription: \"\",\n        title: \"\"\n      },\n      certainty: [{\n        id: 1,\n        certaintyValue: 60\n      }, {\n        id: 2,\n        certaintyValue: 65\n      }, {\n        id: 3,\n        certaintyValue: 70\n      }, {\n        id: 4,\n        certaintyValue: 75\n      }, {\n        id: 5,\n        certaintyValue: 80\n      }, {\n        id: 6,\n        certaintyValue: 85\n      }, {\n        id: 7,\n        certaintyValue: 90\n      }]\n    };\n  },\n  computed: {\n    calculatedSumHours: function calculatedSumHours() {\n      if (this.estimateData.research === '' || this.estimateData.planning === '' || this.estimateData.development === '' || this.estimateData.testing === '' || this.estimateData.stabilization === '') {\n        return 0;\n      } else {\n        return (parseInt(this.estimateData.research) + parseInt(this.estimateData.planning) + parseInt(this.estimateData.development) + parseInt(this.estimateData.testing) + parseInt(this.estimateData.stabilization)).toFixed(2);\n      }\n    },\n    calculatedAdjustedSumHours: function calculatedAdjustedSumHours() {\n      return (parseInt(this.calculatedSumHours) * (1 + (1 - parseInt(this.estimateData.certainty) / 100))).toFixed(2);\n    },\n    // calculatedTotalResearch: function(){\n    //   return estimateData.research\n    // },\n    invalidTask: function invalidTask() {\n      return this.estimateData.task === '';\n    },\n    invalidResearchTime: function invalidResearchTime() {\n      return this.estimateData.research === '' || isNaN(this.estimateData.research);\n    },\n    invalidPlanningTime: function invalidPlanningTime() {\n      return this.estimateData.planning === '' || isNaN(this.estimateData.planning);\n    },\n    invalidTestingTime: function invalidTestingTime() {\n      return this.estimateData.testing === '' || isNaN(this.estimateData.testing);\n    },\n    invalidDevelopmentTime: function invalidDevelopmentTime() {\n      return this.estimateData.development === '' || isNaN(this.estimateData.development);\n    },\n    invalidStabilizationTime: function invalidStabilizationTime() {\n      return this.estimateData.stabilization === '' || isNaN(this.estimateData.stabilization);\n    },\n    invalidCertainty: function invalidCertainty() {\n      return this.estimateData.testing === '';\n    }\n  },\n  methods: {\n    formatDate: function formatDate(dateCreated) {\n      return format(new Date(dateCreated), 'dd-MM-yyy');\n    },\n    //calculate total time for research\n    // totalResearchTime(){\n    // },\n    addEstimate: function () {\n      var _addEstimate = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var sum, adjustedSum, newEstimate, response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.submitting = true;\n\n                if (!(this.invalidTask || this.invalidResearchTime || this.invalidPlanningTime || this.invalidTestingTime || this.invalidDevelopmentTime || this.invalidStabilizationTime || this.invalidCertainty)) {\n                  _context.next = 4;\n                  break;\n                }\n\n                this.error = true;\n                return _context.abrupt(\"return\");\n\n              case 4:\n                sum = this.calculatedSumHours;\n                adjustedSum = this.calculatedAdjustedSumHours;\n                newEstimate = {\n                  developer: this.$store.getters.getUser.id,\n                  task: this.estimateData.task,\n                  research: this.estimateData.research,\n                  planning: this.estimateData.planning,\n                  development: this.estimateData.development,\n                  testing: this.estimateData.testing,\n                  stabilization: this.estimateData.stabilization,\n                  certainty: this.estimateData.certainty,\n                  sum: sum,\n                  adjustedSum: adjustedSum,\n                  comments: this.estimateData.comment\n                };\n                console.log(sum);\n                console.log(adjustedSum);\n                this.success = true; // const response = await AuthService.addEstimation(newEstimate)\n                // console.log(newEstimate)\n                // console.log(response.addedEstimate.submittedDate)\n\n                _context.next = 12;\n                return axios.post(\"api/create-estimate/\" + this.$route.params.id, newEstimate);\n\n              case 12:\n                response = _context.sent;\n                console.log(response);\n                this.estimationData.push({\n                  task: response.data.task,\n                  research: response.data.research,\n                  planning: response.data.planning,\n                  development: response.data.development,\n                  testing: response.data.testing,\n                  stabilization: response.data.stabilization,\n                  certainty: response.data.certainty,\n                  comments: response.data.comments,\n                  sumHours: response.data.sumHours,\n                  adjustedSumHours: response.data.adjustedSumHours\n                });\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function addEstimate() {\n        return _addEstimate.apply(this, arguments);\n      }\n\n      return addEstimate;\n    }(),\n    //Sending estimates added to project manager by developer\n    handleSubmitEstimate: function () {\n      var _handleSubmitEstimate = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios.put(\"api/update-estimateRequest/\" + this.$route.params.id, this.estimationData);\n\n              case 2:\n                response = _context2.sent;\n                console.log(response);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleSubmitEstimate() {\n        return _handleSubmitEstimate.apply(this, arguments);\n      }\n\n      return handleSubmitEstimate;\n    }()\n  },\n  //fetches estimate when the component is created\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee3() {\n      var res, projectManagerId, response;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.get(\"api/estimate-request/\" + this.$route.params.id);\n\n            case 3:\n              res = _context3.sent;\n              this.estimate = res.data; // console.log(res.data )\n              // const loggedInDeveloper = this.$store.getters.getUser.id;\n              // const response = await axios.get(`api/get-all-estimates/` + loggedInDeveloper)\n\n              projectManagerId = res.data.projectManager._id; // console.log(projectManagerId)\n\n              _context3.next = 8;\n              return axios.get(\"api/get/\" + this.$route.params.id + \"/\" + projectManagerId);\n\n            case 8:\n              response = _context3.sent;\n              this.estimationData = response.data; // console.log(response.data.length)\n              // console.log(response.data[0].research)\n              // let n = response.data.length - 1\n              // const totalResearchTime = response.data[0].research + response.data[n].research + response.data[n++].research \n              // console.log(totalResearchTime)\n              // let totalResearchTime \n              // for(var i=0; i<response.data.length; i++){\n              // totalResearchTime = response.data[i].research\n              // totalResearchTime = \n              // }\n\n              console.log(response.data);\n              _context3.next = 16;\n              break;\n\n            case 13:\n              _context3.prev = 13;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error(_context3.t0);\n\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this, [[0, 13]]);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }()\n};",{"version":3,"sources":["PendingEstimateTable.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"card shadow\" id=\"card\"\n       :class=\"type === 'dark' ? 'bg-default': ''\">\n    <div v-on:click=\"isShow = !isShow\"   class=\"card-header border-1\"\n         :class=\"type === 'dark' ? 'bg-transparent': ''\">\n      <div class=\"row align-items-center\">\n        <div class=\"col\">\n          <h3 class=\"mb-0\" :class=\"type === 'dark' ? 'text-white': ''\">\n            {{estimate.title}} \n          </h3>\n        </div>\n        <div class=\"col\">\n         <i class=\"ni ni-bold-down\" id=\"bold-down\"></i>\n        </div>\n      </div>\n    </div>\n      <div class=\"card-body\">\n        <div v-show=\"isShow\"  class=\"content\">\n           <div class=\"row\">\n            <div class=\"col- pl-3 align-self-start\">\n              <p>Project </p>\n              <p>Project Manager </p>\n              <p>Date Created </p>\n              <p>Due Date </p>\n              <p>Main Task Description </p>\n            </div>\n            <div class=\"col details align-self-start\">\n            <p>{{estimate.project.name}}</p>\n            <p>{{estimate.projectManager.name}}</p>\n            <p>{{formatDate(estimate.dateCreated)}}</p>\n            <p>{{estimate.dueDate}}</p>\n            <p>{{estimate.taskDescription}}</p>\n            </div>\n          </div>\n        </div>   \n    </div>\n    <div class=\"table-responsive table-hover\">\n      <table class=\"table\">\n        <thead class=\"thead-light\">\n            <tr>\n          <td class=\"table-head\" scope=\"col\"><b>Task</b></td>\n          <td class=\"table-head\" scope=\"col\"><b>Research</b></td>\n          <td class=\"table-head\" scope=\"col\"><b>Planning</b></td>\n          <td class=\"table-head\" scope=\"col\"><b>Development</b></td>\n          <td class=\"table-head\" scope=\"col\"><b>Testing</b></td>\n          <td class=\"table-head\" scope=\"col\"><b>Stablization</b></td>\n          <td class=\"table-head\" scope=\"col\"><b>Certainty</b></td>\n          <!-- <td class=\"table-head\" scope=\"col\"><b>Sum Hours</b></td>\n          <td class=\"table-head\" scope=\"col\"><b>Adjusted Sum Hours</b></td> -->\n          <td class=\"table-head\" scope=\"col\">\n            <span class=\"action-icons\">\n              <!-- <i v-on:click=\"isShowing = !isShowing\" class=\"far fa-comments fa-1x\" id=\"comments\"></i> -->\n              <i v-on:click=\"isShowing = !isShowing\" class=\"fas fa-comments\" id=\"comments\"></i>\n            </span>\n          </td>\n          <td class=\"table-head\"  scope=\"col\"></td>\n          <td class=\"table-head\" scope=\"col\"></td>\n          <td class=\"table-head\" scope=\"col\"><b></b></td> \n      </tr>\n    </thead>\n  <tbody v-for=\"estimationInfo in estimationData\" :key=\"estimationInfo.id\">\n    <tr>\n      <td scope=\"row\">{{estimationInfo.task}}</td>\n      <td>{{estimationInfo.research}}</td>\n      <td>{{estimationInfo.planning}}</td>\n      <td>{{estimationInfo.development}}</td>\n      <td>{{estimationInfo.testing}}</td>\n      <td>{{estimationInfo.stabilization}}</td>\n      <td>{{estimationInfo.certainty}}</td>\n\n      <!-- <td>{{estimationInfo.sumHours}}</td>\n      <td>{{estimationInfo.adjustedSumHours}}</td> -->\n      <td></td>\n      \n      <td class=\"text-right pl-4\">\n        <span class=\"action-icons\">\n          <router-link  to=\"/\" id=\"view\">\n            <i class=\"rounded-circle fas fa-pen\" aria-hidden=\"true\" id=\"action-icons\"></i>\n          </router-link>\n        </span>\n        <span class=\"action-icons\">\n          <router-link  to=\"/\" id=\"view\">\n            <i class=\"rounded-circle fas fa-trash-alt fa-1x\" aria-hidden=\"true\" id=\"action-icons\"></i>\n          </router-link>\n        </span>\n      </td>\n      <td></td>\n      <td></td>\n    </tr>\n    <tr v-show=\"isShowing\">\n      <th><b>Comment:</b></th>\n      <td colspan=\"10\">{{estimationInfo.comments}}</td>\n    </tr>\n  </tbody>\n  <tr>\n  <th scope=\"col\">Total</th>\n  <th scope=\"col\"></th>\n  <th scope=\"col\"></th>\n  <th scope=\"col\"></th>\n  <th scope=\"col\"></th>\n  <th scope=\"col\"></th>\n  <th scope=\"col\"></th>\n  <th scope=\"col\"></th>\n  <th scope=\"col\"></th>\n  <th></th>\n  <th></th>\n\n</tr>\n<tr>\n  <td colspan=\"12\" class=\"text-right\">\n    <base-button type=\"primary\" size=\"sm\" class=\"shadow-none spacing btn-md mb-2\" @click=\"modal = true\">Add Task</base-button>\n    <modal :show.sync=\"modal\" id=\"modal\">\n      <template slot=\"header\">\n          <h3 class=\"modal-title\" id=\"exampleModalLabel\">New Task</h3>\n      </template>\n      <!-- Add task form -->\n      <form role=\"form\" method=\"POST\">  \n         <div class=\"row mt--4\">\n           <div class=\"col-sm-3\"></div>\n            <div class=\"col-sm-2\">\n              <h6 class=\"heading-small text-capitalize float-left  text-resize\">Sum hours: </h6>\n            </div>\n            <div class=\"col-sm-2 ml-2\">\n              <h6 class=\"heading-small  text-capitalize float-left  text-resize\" >{{calculatedSumHours}} hrs</h6>\n            </div> \n            <div class=\"col-sm-3 \">\n              <h6 class=\"heading-small text-capitalize float-left  text-resize\" >Adjusted Sum: </h6>\n            </div>\n            <div class=\"col-sm-1 ml--3\">\n              <h6 class=\"heading-small  text-capitalize float-left  text-resize\">{{calculatedAdjustedSumHours}} hrs</h6>\n            </div>\n          </div>\n          <div class=\"row \">\n            <div class=\"col-sm-3 \">\n              <h6 class=\"text-resize heading-small text-muted float-left text-capitalize\">Task</h6>\n            </div>\n              <div class=\"col-sm\">\n                  <base-input alternative\n                          class=\"\"\n                          placeholder=\"Add sub task here...\"\n                          v-model=\"estimateData.task\"\n                          :class=\"{ 'has-error': submitting && invalidTask } \" \n                          >\n                </base-input>\n              </div>  \n          </div>\n          <div class=\"row mt--2\">\n            <div class=\"col-sm-3\">\n              <h6 class=\"heading-small text-muted  float-left text-capitalize text-resize\">Research</h6>\n            </div>\n            <div class=\"col-sm-3\">  \n              <base-input alternative\n                      class=\"\"\n                      placeholder=\"0.00hrs\"\n                      v-model=\"estimateData.research\"\n                      :class=\"{ 'has-error': submitting && invalidResearchTime } \" \n                      >\n            </base-input>\n            </div>\n            <div class=\"col-sm-3\">\n              <h6 class=\"heading-small text-muted  float-left text-capitalize text-resize\">Planning</h6>\n            </div>\n            <div class=\"col-sm-3\">  \n              <base-input alternative\n                      class=\"\"\n                      placeholder=\"0.00hrs\"\n                      v-model=\"estimateData.planning\"\n                      :class=\"{ 'has-error': submitting && invalidPlanningTime } \" \n                      >\n            </base-input>\n            </div>\n          </div>\n                    <div class=\"row mt--2\">\n            <div class=\"col-sm-3\">\n              <h6 class=\"heading-small text-muted  float-left text-capitalize text-resize\">Development</h6>\n            </div>\n            <div class=\"col-sm-3\">  \n              <base-input alternative\n                      class=\"\"\n                      placeholder=\"0.00hrs\"\n                      v-model=\"estimateData.development\"\n                      :class=\"{ 'has-error': submitting && invalidDevelopmentTime } \" \n\n                      >\n            </base-input>\n            </div>\n            <div class=\"col-sm-3\">\n              <h6 class=\"heading-small text-muted  float-left text-capitalize text-resize\">Testing</h6>\n            </div>\n            <div class=\"col-sm-3\">  \n              <base-input alternative\n                      class=\"\"\n                      placeholder=\"0.00hrs\"\n                      v-model=\"estimateData.testing\"\n                      :class=\"{ 'has-error': submitting && invalidTestingTime } \" \n                      >\n            </base-input>\n            </div>\n          </div>\n            <div class=\"row mt--2\">\n            <div class=\"col-sm-3\">\n              <h6 class=\"heading-small text-muted  float-left text-capitalize text-resize\">Stabilization</h6>\n              <!-- <i class=\"fas fa-info-circle ml-2 mt-2  btn-tooltip\" id=\"myicon\" v-b-tooltip.hover.right title=\"Stabilization ....\"></i> -->\n            </div>\n            <div class=\"col-sm-3\">  \n              <base-input alternative\n                      class=\"\"\n                      placeholder=\"0.00hrs\"\n                      v-model=\"estimateData.stabilization\"\n                      :class=\"{ 'has-error': submitting && invalidStabilizationTime } \" >\n            </base-input>\n            </div>\n            <div class=\"col-sm-3\">\n              <h6 class=\"heading-small text-muted  float-left text-capitalize text-resize\">Certainty</h6>\n              <!-- <i class=\"fas fa-info-circle  mr-2 mt-2 \" id=\"myicon\"  v-b-tooltip.hover.right title=\"Certainty must be les\"></i> -->\n            </div>\n            <div class=\"col-sm-3\">  \n              <base-input alternative\n                      class=\"\"\n                      placeholder=\"0.00hrs\"\n                      :class=\"{ 'has-error': submitting && invalidCertainty } \">\n                      <select class=\"custom-select\" id=\"inputGroupSelect01\" v-model=\"estimateData.certainty\">\n                        <option disabled value=\"\">Please select</option>\n                        <option v-for=\"certntyValue in certainty\" :key=\"certntyValue.id\">{{certntyValue.certaintyValue}}</option>\n                        </select>\n            </base-input>\n            </div>\n          </div>\n      \n \n          <div class=\"row mt--2\">\n            <div class=\"col-sm-3\">\n              <h6 class=\"heading-small text-muted float-left text-capitalize text-resize\">Comment</h6>\n            </div>\n            <div class=\"col-sm\">\n              <base-input alternative=\"\">\n                  <textarea rows=\"3\" v-model=\"estimateData.comment\" class=\"form-control form-control-alternative\" placeholder=\"Add comment here ...\"></textarea>\n              </base-input>\n            </div>\n          </div>\n           <p v-if=\"error && submitting\" class=\"error-message\">\n                ❗Please fill in all fields\n            </p>\n            <p v-if=\"success\" class=\"success-message\">\n                ✅ Successfully sent\n            </p>\n        </form>\n      <!-- <div>\n        <AddTaskForm />\n      </div> -->\n        <template slot=\"footer\">\n            <base-button class=\"shadow-none cancel-color mt--5\" type=\"secondary\" @click=\"modal = false\">Close</base-button>\n            <base-button class=\"shadow-none mt--5\" type=\"primary\" @click=\"addEstimate\">Add</base-button>\n        </template>\n        \n    </modal>\n  </td>\n</tr>\n</table>\n</div>   \n   <div class=\"card-footer\">\n      <div class=\"row  \">\n        <div class=\"col text-left\">\n          <base-button size=\"sm\" class=\"shadow-none spacing btn-lg px-5\" id=\"cancel\">Cancel</base-button>\n        </div>\n        <div class=\"col text-right\">\n          <!-- <base-button type=\"primary\" size=\"sm\" class=\"shadow-none spacing btn-lg px-4\" id=\"save-draft\">Save as draft</base-button> -->\n          <base-button type=\"primary\" size=\"sm\" class=\"shadow-none spacing btn-lg px-5\" id=\"submit\" @click=\"handleSubmitEstimate\">Submit</base-button>\n        </div>\n      </div>\n   </div>\n  </div>\n</template>\n<script>\n// import AddTaskForm from '../Forms/AddTaskForm'\nimport AuthService from '../../services/AuthService'\nimport axios from \"axios\";\nimport { format } from 'date-fns'\n\n  export default {\n    name: 'pending-table',\n    components: {\n      // AddTaskForm,\n    },\n    props: {\n      type: {\n        type: String\n      },\n      title: String\n    },\n    data() {\n      return {\n         modal: false,\n         isShowing:false,\n         isShow: false,\n         submitting: false,\n         error: false,\n         success: false,\n         format,\n         estimateData : {\n           task: '',\n           research: 0,\n           planning: 0,\n           development: 0,\n           testing: 0,\n           stabilization: 0,\n           certainty: 0,\n           sum: 0,\n           adjustedSum: 0,\n           comments: '',\n           totalSum: 0\n          },\n          estimationData: [],\n\n        estimate: {\n            dateCreated: \"\",\n            projectManager: \"\",\n            dueDate: \"\",\n            project: \"\",\n            taskDescription: \"\",\n            title: \"\"\n        },\n        certainty: [\n          { \n            id: 1,\n            certaintyValue: 60 \n          },\n          { \n            id: 2,\n            certaintyValue: 65 \n          },\n          { \n            id: 3,\n            certaintyValue: 70 \n          },\n          { \n            id: 4,\n            certaintyValue: 75\n          },\n          { \n            id: 5,\n            certaintyValue: 80\n          },\n          { \n            id: 6,\n            certaintyValue: 85 \n          },\n          { \n            id: 7,\n            certaintyValue: 90 \n          }\n        ],\n\n        \n      }\n    },\n    computed: {\n\n      calculatedSumHours: function(){\n        if (this.estimateData.research === '' || this.estimateData.planning === ''|| this.estimateData.development === '' || this.estimateData.testing === '' || this.estimateData.stabilization === '') {\n          return 0\n        }else{\n          return (parseInt(this.estimateData.research) + parseInt(this.estimateData.planning) + parseInt(this.estimateData.development) + parseInt(this.estimateData.testing) + parseInt(this.estimateData.stabilization)).toFixed(2);\n        }\n      },\n      calculatedAdjustedSumHours: function(){\n        return (parseInt(this.calculatedSumHours) * (1 + (1 - parseInt(this.estimateData.certainty) / 100))).toFixed(2)\n      },\n      // calculatedTotalResearch: function(){\n      //   return estimateData.research\n      // },\n      invalidTask(){\n        return this.estimateData.task === ''\n      },\n      invalidResearchTime(){\n          return this.estimateData.research=== '' || isNaN( this.estimateData.research)\n      },\n      invalidPlanningTime(){\n          return this.estimateData.planning === '' || isNaN(this.estimateData.planning)\n      },\n      invalidTestingTime(){\n          return this.estimateData.testing === '' || isNaN(this.estimateData.testing)\n      },\n      invalidDevelopmentTime(){\n          return this.estimateData.development === '' || isNaN(this.estimateData.development)\n      },\n      invalidStabilizationTime(){\n          return this.estimateData.stabilization === '' || isNaN(this.estimateData.stabilization)\n      },\n      invalidCertainty(){\n          return this.estimateData.testing === ''\n      },\n      \n    },\n    methods: {\n       formatDate: function(dateCreated){\n          return format(new Date(dateCreated), 'dd-MM-yyy')\n            },\n        //calculate total time for research\n        // totalResearchTime(){\n\n        // },\n      \n      async addEstimate(){\n        this.submitting = true\n        if(this.invalidTask || this.invalidResearchTime || this.invalidPlanningTime || this.invalidTestingTime || this.invalidDevelopmentTime || this.invalidStabilizationTime || this.invalidCertainty){\n          this.error = true\n          return\n        }\n        let sum = this.calculatedSumHours\n        let adjustedSum = this.calculatedAdjustedSumHours\n        let newEstimate ={\n            developer: this.$store.getters.getUser.id,\n            task: this.estimateData.task,\n            research: this.estimateData.research,\n            planning: this.estimateData.planning,\n            development: this.estimateData.development,\n            testing: this.estimateData.testing,\n            stabilization: this.estimateData.stabilization,\n            certainty: this.estimateData.certainty,\n            sum,\n            adjustedSum,\n            comments: this.estimateData.comment, \n        }\n        console.log(sum)\n        console.log(adjustedSum)\n        this.success=true\n          // const response = await AuthService.addEstimation(newEstimate)\n          // console.log(newEstimate)\n          // console.log(response.addedEstimate.submittedDate)\n          const response = await axios.post(`api/create-estimate/` + this.$route.params.id, newEstimate)\n          console.log(response)\n\n          this.estimationData.push({\n            task: response.data.task,\n            research: response.data.research,\n            planning: response.data.planning,\n            development: response.data.development,\n            testing: response.data.testing,\n            stabilization: response.data.stabilization,\n            certainty: response.data.certainty,\n            comments: response.data.comments,\n            sumHours: response.data.sumHours,\n            adjustedSumHours: response.data.adjustedSumHours\n          })\n          \n\n      },\n      //Sending estimates added to project manager by developer\n      async handleSubmitEstimate(){\n        // console.log(this.estimationData)\n        const response = await axios.put(`api/update-estimateRequest/` + this.$route.params.id, this.estimationData)\n        console.log(response)\n      }\n    },\n    //fetches estimate when the component is created\n    async created(){\n      try {\n        const res = await axios.get(`api/estimate-request/` + this.$route.params.id)\n        this.estimate = res.data; \n        // console.log(res.data )\n        \n\n\n        // const loggedInDeveloper = this.$store.getters.getUser.id;\n        // const response = await axios.get(`api/get-all-estimates/` + loggedInDeveloper)\n        const projectManagerId = res.data.projectManager._id\n        // console.log(projectManagerId)\n        const response = await axios.get(`api/get/` + this.$route.params.id + `/` + projectManagerId)\n\n        this.estimationData = response.data\n        \n        // console.log(response.data.length)\n        // console.log(response.data[0].research)\n        // let n = response.data.length - 1\n        // const totalResearchTime = response.data[0].research + response.data[n].research + response.data[n++].research \n        // console.log(totalResearchTime)\n        // let totalResearchTime \n        // for(var i=0; i<response.data.length; i++){\n  \n          // totalResearchTime = response.data[i].research\n          // totalResearchTime = \n\n\n        // }\n        console.log(response.data)\n        \n        \n        \n      } catch(e){\n        console.error(e)\n      }\n    },\n    \n  }\n</script>\n<style>\n#view{\n  color: #747273;\n  padding-left: 10px;\n}\n#left{\n  text-align: left;\n}\n/* Adding cursor to table */\n.table-row{\n  cursor:pointer;\n}\n\n.spacing{\n  padding-left: 16px;\n  padding-right: 16px;\n}\n\n/* First column of table font adjustment */\n.text-sm {\n  font-weight: 400;\n  font-size: 13px !important;\n}\n/* styling rounded border */\n.rounded-circle {\n  border: 1px solid rgb(201, 201, 199);\n  padding: 6px;\n  \n}\n\n/* Status column font size adjustment */\nspan .status{\n  font-size: 13px; \n}\n\n\n/* displaying action icons on hover */\ntable > tbody > tr .action-icons{\n  visibility: hidden;\n}\ntable > tbody > tr:hover .action-icons{\n  visibility: visible;\n}\n\n.details {\n  /* margin-left: -800px; */\n  color: rgb(140, 140, 146);\n}\nbase-button{\n  border-radius: 4px;\n}\n\n#cancel{\n  background-color: #e2e0e1;\n  border: none;\n  color: #747273;\n}\n#save-draft{\n  background-color: #faf9f9;\n  color: #5e72e4;\n  border: 1px solid #5e72e4;\n}\n\n/* Desktops and laptops ----------- */\n@media only screen  and (min-width : 1224px) {\n.card{\n  margin-top: 30px;\n}\n}\n/* Adjustments to font size of the table head content */\n.table thead th {\n  font-size: 13x;\n  /* font-weight: 700; */\n}\n.table-head {  \n  background: #e7eaec !important;\n  font-size: 10px;\n  \n  font-weight: 700;\n  /* text-transform: uppercase; */\n}\niframe {\n  display:block;\n  margin-top: 20px;\n  margin-left: 200px;\n  width:850px;\n  height:300px;\n}\n#bold-down{\n  float: right;\n  cursor: pointer;\n}\n.card-header{\n  cursor: pointer;\n}\n\n/* cancel button for modal */\n.cancel-color{\n  color: rgb(135, 141, 148);\n  background-color: #e2e0e1;\n}\n.cancel-color:hover{\n  color: #ffffff;\n  background-color: #afadae;\n}\n\n/* Styling fonts */\n.styling{\n  font-weight: 400;\n  font-size: 14px;\n}\n#modal{\n  height: fit-content;\n  /* margin-top: -4px; */\n}\n\n/* resizing the labels for the modal */\n.text-resize{\n  font-size: 14px;\n}\n/* Large screens ----------- */\n/* @media only screen  and (min-width : 1824px) {\n.card{\n  margin-top: 20px;\n  \n}\n} */\n#comments{\n color: #5e72e4;\n}\n#comments:hover {\n  cursor:pointer;\n  color: #d10572;\n}\n#commentsactive {font-size: 120%;}\n#action-icons {\n  background-color: #5e72e4;\n  color: #eee7eb;\n}\n#action-icons:hover {\n  background-color: #d10572;\n  color: #eee7eb;\n}\n/* .table{\n  width: 100%; \n}\n.card{\n  width: 79vw;\n} */\n#myicon{\n  color: #5e72e4;\n}\n#myicon:hover {\n  cursor:pointer;\n  color: #d10572;\n}\n#myicon:hover, #myiconactive {font-size: 120%;}\n[class*='-message'] {\n    font-weight: 500;\n  }\n  .error-message {\n    color: #d33c40;\n    text-align: left;\n  }\n  .success-message {\n    color: #32a95d;\n    text-align: left;\n  }\n</style>\n"],"sourceRoot":"src/views/Tables"}]}
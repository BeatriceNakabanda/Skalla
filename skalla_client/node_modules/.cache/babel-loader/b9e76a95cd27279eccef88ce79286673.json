{"remainingRequest":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/thread-loader/dist/cjs.js!/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/babel-loader/lib/index.js!/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/src/views/Forms/CreateEstimateForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/src/views/Forms/CreateEstimateForm.vue","mtime":1580896445622},{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/media/beatrice/AA5A6A6A5A6A336D1/templates/1/new/Estimation-System/skalla_client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport flatPicker from \"vue-flatpickr-component\";\nimport \"flatpickr/dist/flatpickr.css\";\nimport AuthService from \"../../services/AuthService\";\nexport default {\n  name: \"create-estimate-form\",\n  components: {\n    flatPicker: flatPicker\n  },\n  // props: ['estimate'],\n  data: function data() {\n    return {\n      selectedProject: \"\",\n      selectedDeveloper: \"\",\n      error: false,\n      submitting: false,\n      success: false,\n      projects: [],\n      developers: [],\n      estimate: {\n        selectedProject: \"\",\n        selectedDeveloper: \"\",\n        status: \"\",\n        statusType: \"\",\n        dueDate: \"\",\n        title: \"\",\n        taskDescription: \"\"\n      }\n    };\n  },\n  // automatically computed properties(functions) to validate form inputs\n  computed: {\n    invalidProjectName: function invalidProjectName() {\n      return this.estimate.project === \"\";\n    },\n    invalidDeveloper: function invalidDeveloper() {\n      return this.estimate.developers === \"\";\n    },\n    invalidDueDate: function invalidDueDate() {\n      return this.estimate.dueDate === \"\";\n    },\n    invalidTitle: function invalidTitle() {\n      return this.estimate.title === \"\";\n    },\n    invalidTaskDescription: function invalidTaskDescription() {\n      return this.estimate.taskDescription === \"\";\n    }\n  },\n  methods: {\n    addEstimate: function () {\n      var _addEstimate = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.clearForm();\n                this.submitting = true; // validating empty inputs\n\n                if (!(this.invalidProjectName || this.invalidDueDate || this.invalidTitle || this.invalidTaskDescription)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                this.error = true;\n                return _context.abrupt(\"return\");\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function addEstimate() {\n        return _addEstimate.apply(this, arguments);\n      }\n\n      return addEstimate;\n    }(),\n    clearForm: function clearForm() {\n      this.success = false;\n      this.error = false;\n    },\n    handleSaveDraft: function () {\n      var _handleSaveDraft = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var draftedEstimate, newEstimate, response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // eslint-disable-next-line no-console\n                console.log(\"testing save\");\n                this.clearForm();\n                this.submitting = true; // validating empty inputs\n\n                if (!(this.invalidProjectName || this.invalidDueDate || this.invalidTitle || this.invalidTaskDescription)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                this.error = true;\n                return _context2.abrupt(\"return\");\n\n              case 6:\n                draftedEstimate = this.submitting = true;\n\n                if (!draftedEstimate) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                newEstimate = {\n                  project: this.estimate.selectedProject.id,\n                  developer: this.estimate.selectedDeveloper.id,\n                  dueDate: this.estimate.dueDate,\n                  title: this.estimate.title,\n                  taskDescription: this.estimate.taskDescription,\n                  projectManager: this.$store.getters.getUser.id,\n                  status: this.estimate.status = \"Draft\",\n                  statusType: this.estimate.statusType = \"warning\"\n                };\n                console.log(newEstimate);\n                _context2.next = 12;\n                return AuthService.addEstimate(newEstimate);\n\n              case 12:\n                response = _context2.sent;\n                console.log(response);\n\n              case 14:\n                this.success = true;\n                this.error = false;\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleSaveDraft() {\n        return _handleSaveDraft.apply(this, arguments);\n      }\n\n      return handleSaveDraft;\n    }()\n  },\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee3() {\n      var response, resp;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.get(\"api/projects\");\n\n            case 3:\n              response = _context3.sent;\n              _context3.next = 6;\n              return axios.get(\"api/users/developers\");\n\n            case 6:\n              resp = _context3.sent;\n              this.projects = response.data;\n              this.developers = resp.data; // window.location.reload();\n\n              console.log(this.projects);\n              _context3.next = 15;\n              break;\n\n            case 12:\n              _context3.prev = 12;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error(_context3.t0);\n\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this, [[0, 12]]);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }()\n};",{"version":3,"sources":["CreateEstimateForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoIA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,UAAA,MAAA,yBAAA;AACA,OAAA,8BAAA;AACA,OAAA,WAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,sBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA;AADA,GAFA;AAKA;AACA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,eAAA,EAAA,EADA;AAEA,MAAA,iBAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,KAHA;AAIA,MAAA,UAAA,EAAA,KAJA;AAKA,MAAA,OAAA,EAAA,KALA;AAMA,MAAA,QAAA,EAAA,EANA;AAOA,MAAA,UAAA,EAAA,EAPA;AASA,MAAA,QAAA,EAAA;AACA,QAAA,eAAA,EAAA,EADA;AAEA,QAAA,iBAAA,EAAA,EAFA;AAGA,QAAA,MAAA,EAAA,EAHA;AAIA,QAAA,UAAA,EAAA,EAJA;AAKA,QAAA,OAAA,EAAA,EALA;AAMA,QAAA,KAAA,EAAA,EANA;AAOA,QAAA,eAAA,EAAA;AAPA;AATA,KAAA;AAmBA,GA1BA;AA2BA;AACA,EAAA,QAAA,EAAA;AACA,IAAA,kBADA,gCACA;AACA,aAAA,KAAA,QAAA,CAAA,OAAA,KAAA,EAAA;AACA,KAHA;AAIA,IAAA,gBAJA,8BAIA;AACA,aAAA,KAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,KANA;AAOA,IAAA,cAPA,4BAOA;AACA,aAAA,KAAA,QAAA,CAAA,OAAA,KAAA,EAAA;AACA,KATA;AAUA,IAAA,YAVA,0BAUA;AACA,aAAA,KAAA,QAAA,CAAA,KAAA,KAAA,EAAA;AACA,KAZA;AAaA,IAAA,sBAbA,oCAaA;AACA,aAAA,KAAA,QAAA,CAAA,eAAA,KAAA,EAAA;AACA;AAfA,GA5BA;AA6CA,EAAA,OAAA,EAAA;AACA,IAAA,WADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,qBAAA,SAAA;AACA,qBAAA,UAAA,GAAA,IAAA,CAHA,CAIA;;AAJA,sBAMA,KAAA,kBAAA,IACA,KAAA,cADA,IAEA,KAAA,YAFA,IAGA,KAAA,sBATA;AAAA;AAAA;AAAA;;AAWA,qBAAA,KAAA,GAAA,IAAA;AAXA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAgBA,IAAA,SAhBA,uBAgBA;AACA,WAAA,OAAA,GAAA,KAAA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,KAnBA;AAoBA,IAAA,eApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,cAAA;AACA,qBAAA,SAAA;AACA,qBAAA,UAAA,GAAA,IAAA,CAxBA,CAyBA;;AAzBA,sBA2BA,KAAA,kBAAA,IACA,KAAA,cADA,IAEA,KAAA,YAFA,IAGA,KAAA,sBA9BA;AAAA;AAAA;AAAA;;AAgCA,qBAAA,KAAA,GAAA,IAAA;AAhCA;;AAAA;AAmCA,gBAAA,eAnCA,GAmCA,KAAA,UAAA,GAAA,IAnCA;;AAAA,qBAoCA,eApCA;AAAA;AAAA;AAAA;;AAqCA,gBAAA,WArCA,GAqCA;AACA,kBAAA,OAAA,EAAA,KAAA,QAAA,CAAA,eAAA,CAAA,EADA;AAEA,kBAAA,SAAA,EAAA,KAAA,QAAA,CAAA,iBAAA,CAAA,EAFA;AAGA,kBAAA,OAAA,EAAA,KAAA,QAAA,CAAA,OAHA;AAIA,kBAAA,KAAA,EAAA,KAAA,QAAA,CAAA,KAJA;AAKA,kBAAA,eAAA,EAAA,KAAA,QAAA,CAAA,eALA;AAMA,kBAAA,cAAA,EAAA,KAAA,MAAA,CAAA,OAAA,CAAA,OAAA,CAAA,EANA;AAOA,kBAAA,MAAA,EAAA,KAAA,QAAA,CAAA,MAAA,GAAA,OAPA;AAQA,kBAAA,UAAA,EAAA,KAAA,QAAA,CAAA,UAAA,GAAA;AARA,iBArCA;AA+CA,gBAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AA/CA;AAAA,uBAgDA,WAAA,CAAA,WAAA,CAAA,WAAA,CAhDA;;AAAA;AAgDA,gBAAA,QAhDA;AAiDA,gBAAA,OAAA,CAAA,GAAA,CAAA,QAAA;;AAjDA;AAmDA,qBAAA,OAAA,GAAA,IAAA;AACA,qBAAA,KAAA,GAAA,KAAA;;AApDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,GA7CA;AAqGA,EAAA,OArGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAuGA,KAAA,CAAA,GAAA,gBAvGA;;AAAA;AAuGA,cAAA,QAvGA;AAAA;AAAA,qBAwGA,KAAA,CAAA,GAAA,wBAxGA;;AAAA;AAwGA,cAAA,IAxGA;AA2GA,mBAAA,QAAA,GAAA,QAAA,CAAA,IAAA;AACA,mBAAA,UAAA,GAAA,IAAA,CAAA,IAAA,CA5GA,CA6GA;;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,KAAA,QAAA;AA9GA;AAAA;;AAAA;AAAA;AAAA;AAgHA,cAAA,OAAA,CAAA,KAAA;;AAhHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAA","sourcesContent":["<template>\n  <form method=\"POST\" role=\"form\" @submit.prevent=\"addEstimate\">\n    <div>\n      <div class=\"row\">\n        <div class=\"col-sm-3\">\n          <h6 class=\"heading-small text-muted mb-4 float-left\">Project</h6>\n        </div>\n        <div class=\"col-sm\">\n          <base-input\n            alternative\n            ref=\"first\"\n            class=\"mb-3\"\n            placeholder=\"Add project here...\"\n            :class=\"{ 'has-error': submitting && invalidProjectName }\"\n            @keypress=\"clearForm\"\n          >\n            <select\n              class=\"custom-select\"\n              id=\"inputGroupSelect01\"\n              v-model=\"estimate.selectedProject\">\n              <option value=\"\" disabled>Please select a project</option>\n              <option v-for=\"project in projects\"\n                v-bind:value=\"{ id: project._id, name: project.name }\">{{ project.name }}\n              </option>\n            </select>\n          </base-input>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-sm-3\">\n          <h6 class=\"heading-small text-muted mb-4 float-left\">Assign to</h6>\n        </div>\n        <div class=\"col-sm\">\n          <base-input\n            alternative\n            class=\"mb-3\"\n            placeholder=\"Add developer here...\"\n            :class=\"{ 'has-error': submitting && invalidDeveloper }\">\n            <select\n              class=\"custom-select\"\n              id=\"inputGroupSelect01\"\n              v-model=\"estimate.selectedDeveloper\">\n              <option value=\"\" disabled>Please select a developer</option>\n              <option\n                v-for=\"developer in developers\"\n                v-bind:value=\"{ id: developer._id, name: developer.name }\"\n              >\n                {{ developer.name }}</option\n              >\n            </select>\n          </base-input>\n          <!-- <p>id: {{selectedProject.id}}</p>\n            <p>name: {{selectedProject.name}}</p>\n            <p>id: {{selectedDeveloper.id}}</p>\n            <p>name: {{selectedDeveloper.name}}</p> -->\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-sm-3\">\n          <h6 class=\"heading-small text-muted mb-4 float-left\">Due Date</h6>\n        </div>\n        <div class=\"col-sm\">\n          <base-input addon-left-icon=\"ni ni-calendar-grid-58\">\n            <flat-picker\n              slot-scope=\"{ focus, blur }\"\n              @on-open=\"focus\"\n              @on-close=\"blur\"\n              :config=\"{ allowInput: true, dateFormat: 'd-m-Y' }\"\n              placeholder=\"17-07-2019\"\n              class=\"form-control datepicker\"\n              :class=\"{ 'has-error': submitting && invalidDueDate }\"\n              v-model=\"estimate.dueDate\"\n            >\n            </flat-picker>\n          </base-input>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-sm-3\">\n          <h6 class=\"heading-small text-muted mb-4 float-left\">Title</h6>\n        </div>\n        <div class=\"col-sm\">\n          <base-input\n            alternative\n            class=\"mb-3\"\n            placeholder=\"Add title here...\"\n            v-model=\"estimate.title\"\n            :class=\"{ 'has-error': submitting && invalidTitle }\"\n          >\n          </base-input>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-sm-5\">\n          <h6 class=\"heading-small text-muted mb-4 float-left\">\n            Main Task Description\n          </h6>\n        </div>\n        <div class=\"col-sm-12\">\n          <base-input\n            alternative=\"\"\n            :class=\"{ 'has-error': submitting && invalidTaskDescription }\"\n          >\n            <textarea\n              rows=\"4\"\n              v-model=\"estimate.taskDescription\"\n              class=\"form-control form-control-alternative\"\n              placeholder=\"Add main task description here ...\"\n            ></textarea>\n          </base-input>\n        </div>\n      </div>\n    </div>\n    <p v-if=\"error && submitting\" class=\"error-message\">\n      ❗Please fill in all fields\n    </p>\n    <p v-if=\"success\" class=\"success-message\">\n      ✅ Request successfully sent\n    </p>\n    <base-button\n      class=\"shadow-none mt-4 cancel-color\"\n      type=\"secondary\"\n      @click=\"handleSaveDraft()\"\n      >Save as draft</base-button\n    >\n    <!-- <base-button class=\"shadow-none mt-4\" type=\"primary\" @click=\"addEstimate\">Send request</base-button> -->\n    <base-button class=\"shadow-none mt-4\" type=\"primary\" @click=\"addEstimate()\"\n      >Send request</base-button\n    >\n  </form>\n</template>\n<script>\nimport axios from \"axios\";\nimport flatPicker from \"vue-flatpickr-component\";\nimport \"flatpickr/dist/flatpickr.css\";\nimport AuthService from \"../../services/AuthService\";\nexport default {\n  name: \"create-estimate-form\",\n  components: {\n    flatPicker\n  },\n  // props: ['estimate'],\n  data() {\n    return {\n      selectedProject: \"\",\n      selectedDeveloper: \"\",\n      error: false,\n      submitting: false,\n      success: false,\n      projects: [],\n      developers: [],\n\n      estimate: {\n        selectedProject: \"\",\n        selectedDeveloper: \"\",\n        status: \"\",\n        statusType: \"\",\n        dueDate: \"\",\n        title: \"\",\n        taskDescription: \"\"\n      }\n    };\n  },\n  // automatically computed properties(functions) to validate form inputs\n  computed: {\n    invalidProjectName() {\n      return this.estimate.project === \"\";\n    },\n    invalidDeveloper() {\n      return this.estimate.developers === \"\";\n    },\n    invalidDueDate() {\n      return this.estimate.dueDate === \"\";\n    },\n    invalidTitle() {\n      return this.estimate.title === \"\";\n    },\n    invalidTaskDescription() {\n      return this.estimate.taskDescription === \"\";\n    }\n  },\n  methods: {\n    async addEstimate() {\n      this.clearForm();\n      this.submitting = true;\n      // validating empty inputs\n      if (\n        this.invalidProjectName ||\n        this.invalidDueDate ||\n        this.invalidTitle ||\n        this.invalidTaskDescription\n      ) {\n        this.error = true;\n        return;\n      }\n  \n      },\n    clearForm() {\n      this.success = false;\n      this.error = false;\n    },\n    async handleSaveDraft() {\n      // eslint-disable-next-line no-console\n      console.log(\"testing save\");\n      this.clearForm();\n      this.submitting = true;\n      // validating empty inputs\n      if (\n        this.invalidProjectName ||\n        this.invalidDueDate ||\n        this.invalidTitle ||\n        this.invalidTaskDescription\n      ) {\n        this.error = true;\n        return;\n      }\n      let draftedEstimate = (this.submitting = true);\n      if (draftedEstimate) {\n        let newEstimate = {\n          project: this.estimate.selectedProject.id,\n          developer: this.estimate.selectedDeveloper.id,\n          dueDate: this.estimate.dueDate,\n          title: this.estimate.title,\n          taskDescription: this.estimate.taskDescription,\n          projectManager: this.$store.getters.getUser.id,\n          status: (this.estimate.status = \"Draft\"),\n          statusType: (this.estimate.statusType = \"warning\")\n        };\n        console.log(newEstimate);\n        const response = await AuthService.addEstimate(newEstimate);\n        console.log(response);\n      }\n      this.success = true;\n      this.error = false;\n    }\n\n  },\n  async created() {\n    try {\n      const response = await axios.get(`api/projects`);\n      const resp = await axios.get(\n        `api/users/developers`\n      );\n      this.projects = response.data;\n      this.developers = resp.data;\n      // window.location.reload();\n      console.log(this.projects);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\n</script>\n<style scoped>\n[class*=\"-message\"] {\n  font-weight: 500;\n}\n.error-message {\n  color: #d33c40;\n  text-align: left;\n}\n.success-message {\n  color: #32a95d;\n  text-align: left;\n}\n</style>\n"],"sourceRoot":"src/views/Forms"}]}